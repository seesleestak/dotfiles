set nocompatible
set backspace=indent,eol,start " Allow backspace
set mouse=n " Allow scrolling
set hidden " Hide buffers instead of closing
set autoread " Auto reload if file changes outside of vim
set lazyredraw " Only redraw once macro is done running
set number " Show line numbers
set relativenumber " Show relative line numbers
set noeb vb t_vb= " Disable beep
set nowrap " Don't wrap lines

" Fixes ESC delay
set timeoutlen=1000 
set ttimeoutlen=0 

" Tab
set tabstop=2
set shiftwidth=2
set softtabstop=2
set smarttab
set expandtab
set autoindent
autocmd Filetype cpp setlocal expandtab tabstop=4 shiftwidth=4 softtabstop=4

" Backup handling
" set directory^=$HOME/.vim/swapfiles/
set noswapfile
set undodir=~/.vim/undodir
set undofile

" Clipboard
set clipboard=unnamedplus,unnamed

" Show col,row at bottom
set ruler
set rulerformat=%l,%v

" Disables automatic commenting on newline
autocmd FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o

" Syntax Highlighting
" if (has("termguicolors"))
"   set termguicolors
"   set t_8f=[38;2;%lu;%lu;%lum
"   set t_8b=[48;2;%lu;%lu;%lum
" endif

syntax enable
colorscheme nord

" Create Rg command for fzf
command! -bang -nargs=* Rg
  \ call fzf#vim#grep(
  \   'rg --column --line-number --no-heading --color=always --smart-case '.shellescape(<q-args>), 1,
  \   <bang>0 ? fzf#vim#with_preview('up:60%')
  \           : fzf#vim#with_preview('right:50%:hidden', '?'),
  \   <bang>0)

" Plugin config ----------------------------------
  " Closetag
  let g:closetag_filenames = '*.html,*.js'

  " UltiSnips
  let g:UltiSnipsSnippetsDir = '~/.vim/UltiSnips'

  " vim-javascript
  let g:javascript_conceal = 0
  
  " dirvish config
  let g:dirvish_mode = 2
  let g:dirvish_relative_paths = 1
" ------------------------------------------------

source ~/.vim/plugins.vim
source ~/.vim/mappings.vim
source ~/.vim/functions.vim

filetype plugin indent on
